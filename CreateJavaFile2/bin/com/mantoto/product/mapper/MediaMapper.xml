<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mantoto.product.dao.IMediaDao">
  <sql id="column_List" >FigurePath,Description,BId,IsFrontCover,Height,Width,MId,MediaTypeId,Path</sql>
  <sql id="sql_Where" >
<trim><if test="figurePath != null and figurePath!= '' "> 
and  FigurePath = #{figurePath}   
</if>
<if test="description != null and description!= '' "> 
and  Description = #{description}   
</if>
 <if test="bId>0">  
and BId = #{bId} 
</if>
<if test="isFrontCover != null and isFrontCover!= '' "> 
and  IsFrontCover = #{isFrontCover}   
</if>
 <if test="height>0">  
and Height = #{height} 
</if>
 <if test="width>0">  
and Width = #{width} 
</if>
 <if test="mId>0">  
and MId = #{mId} 
</if>
 <if test="mediaTypeId>0">  
and MediaTypeId = #{mediaTypeId} 
</if>
<if test="path != null and path!= '' "> 
and  Path = #{path}   
</if>

</trim></sql>
<select id="selectByIdMedia"   parameterType="java.lang.String"  resultMap="media" >
select <include refid="column_List" /> from Media where MId =#{mId}</select>
<select id="selectCountMedia"   parameterType="com.mantoto.product.model.Media"  resultType="java.lang.Integer" >
select count(MId) from Msg_Media where 1=1<include refid="sql_Where" /></select>
<delete id="deleteMedia" parameterType="java.lang.String">
</delete>
<update id="updateMedia" parameterType="com.mantoto.product.model.Media" >
 UPDATE Msg_Media  <trim prefix="SET" suffixOverrides=",">   
<if test="figurePath != null and figurePath!= '' "> 
FigurePath = #{figurePath},
</if>
<if test="description != null and description!= '' "> 
Description = #{description},
</if>
<if test="isFrontCover != null and isFrontCover!= '' "> 
IsFrontCover = #{isFrontCover},
</if>
 <if test="height>0">  
Height = #{height} ,
</if>
 <if test="width>0">  
Width = #{width} ,
</if>
 <if test="mediaTypeId>0">  
MediaTypeId = #{mediaTypeId} ,
</if>
<if test="path != null and path!= '' "> 
Path = #{path}
</if></trim> where MId=#{mId} </update>
<insert id="insertMedia" parameterType="com.mantoto.product.model.Media" > 
insert into Msg_Media (FigurePath,Description,BId,IsFrontCover,Height,Width,MId,MediaTypeId,Path)values(#{figurePath},#{description},#{bId},#{isFrontCover},#{height},#{width},#{mId},#{mediaTypeId},#{path})</insert>  
<select id="selectMedia"   parameterType="com.mantoto.product.model.Media"  resultMap="media" >
select  top ${pageSize} <include refid="column_List" /> from Msg_Media  where MId not in (select top ${bigenRow} MId from Msg_Media  where 1=1 <include refid="sql_Where" />) and 1=1<include refid="sql_Where" /></select>
<resultMap type="com.mantoto.product.model.Media" id="media"> 
 <id property="mId" column="MId" /> 
<result property="figurePath" column="FigurePath" /> 
<result property="description" column="Description" /> 
<result property="bId" column="BId" /> 
<result property="isFrontCover" column="IsFrontCover" /> 
<result property="height" column="Height" /> 
<result property="width" column="Width" /> 
<result property="mediaTypeId" column="MediaTypeId" /> 
<result property="path" column="Path" /> 
</resultMap> 
</mapper> 